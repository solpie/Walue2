{"version":3,"sources":["webpack:///webpack/bootstrap 23c7752c03ac152c97fb","webpack:///./src/client/view/walue/index.ts","webpack:///./src/client/view/walue/navbar/Navbar.ts","webpack:///./src/client/view/walue/navbar/navbar.html","webpack:///./src/client/view/walue/monitor/Monitor.ts","webpack:///./src/client/view/walue/monitor/Player.ts","webpack:///./src/client/utils/VueBase.ts","webpack:///./src/client/view/walue/monitor/player.html","webpack:///./src/client/model/MonitorModel.ts","webpack:///./src/client/model/Command.ts","webpack:///./src/client/utils/EventDispatcher.ts","webpack:///./src/client/model/AccountInfo.ts","webpack:///./src/client/model/TopicInfo.ts","webpack:///./src/client/model/RoomInfo.ts","webpack:///./src/client/model/DmkInfo.ts","webpack:///./src/client/utils/JsFunc.ts","webpack:///./src/client/view/walue/monitor/monitor.html"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,EAAC;;;;;;;;ACpBD;AACA;AACA;AACA,mBAAkB;AAClB,MAAK;AACL;AACA;AACA;;;;;;;;ACPA,i3B;;;;;;;ACAA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,0BAA0B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;;AC7EA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,yBAAwB,+BAA+B;AACvD;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,EAAC;AACD;AACA;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,qBAAoB,MAAM;AAC1B,uBAAsB;AACtB,uBAAsB;AACtB;AACA,EAAC;AACD;;;;;;;;ACnCA,wEAAuE,aAAa,UAAU,8CAA8C,gBAAgB,UAAU,aAAa,sHAAsH,mC;;;;;;;ACAzS;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,+BAA+B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,oBAAoB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,iBAAiB;AACnD,uBAAsB,mEAAmE;AACzF;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,gCAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,mCAAmC;AACzD;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,iBAAiB;AACnD,uBAAsB,mEAAmE;AACzF;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,gCAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;;;;;;;AC1NA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,+BAA+B;AAC9D;AACA;AACA,gCAA+B,cAAc;AAC7C,sCAAqC,oBAAoB;AACzD;AACA,4BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA,gCAA+B,6BAA6B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACjEA;AACA;AACA;AACA;AACA,cAAa,iEAAiE;AAC9E,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,mCAAmC;AACzD;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,4CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,6BAA6B;AAC/D,uBAAsB,mEAAmE;AACzF;AACA;AACA,cAAa;AACb,kCAAiC,qBAAqB;AACtD,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,6DAA6D;AAC5F;AACA;AACA;AACA,EAAC;AACD;;;;;;;;AC5FA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,YAAY;AACjD;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,6BAA4B,cAAc;AAC1C,6BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/HA,0PAAyP,aAAa,8EAA8E,kCAAkC,yBAAyB,SAAS,qTAAqT,WAAW,SAAS,aAAa,aAAa,kHAAkH,gBAAgB,IAAI,aAAa,wFAAwF,oBAAoB,iG","file":"view/walue.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 23c7752c03ac152c97fb","\"use strict\";\r\nvar Navbar_1 = require('./navbar/Navbar');\r\nvar Monitor_1 = require('./monitor/Monitor');\r\nvar version = '16.11.25.4';\r\ndocument.title = \"舞里由衣 ver \" + version;\r\nvar routes = [\r\n    {\r\n        path: '/', name: 'home',\r\n        components: { default: Monitor_1.monitorView, Navbar: Navbar_1.Navbar }\r\n    }\r\n];\r\nvar router = new VueRouter({\r\n    routes: routes\r\n});\r\nrouter.afterEach(function (to, from) {\r\n    var toPath = to.path;\r\n    router.app.active = toPath.split(\"/\")[1];\r\n});\r\nvar app = new Vue({\r\n    router: router\r\n}).$mount('#app');\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/index.ts\n// module id = 0\n// module chunks = 1","\"use strict\";\r\nexports.Navbar = {\r\n    props: {\r\n        active: {},\r\n    },\r\n    template: require('./navbar.html'),\r\n    methods: {}\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/navbar/Navbar.ts\n// module id = 49\n// module chunks = 1","module.exports = \"<nav class=\\\"nav\\\">\\r\\n    <div class=\\\"nav-left\\\">\\r\\n        <a class=\\\"nav-item is-brand\\\" href=\\\"#\\\">\\r\\n            <img src=\\\"xxxHTMLLINKxxx0.56869940325595980.2184023175232066xxx\\\" alt=\\\"Walue\\\">\\r\\n        </a>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"nav-center\\\">\\r\\n        <a class=\\\"nav-item\\\" href=\\\"#\\\">\\r\\n            <span class=\\\"icon\\\">\\r\\n        <i class=\\\"fa fa-github\\\"></i>\\r\\n      </span>\\r\\n        </a>\\r\\n        <a class=\\\"nav-item\\\" href=\\\"#\\\">\\r\\n            <span class=\\\"icon\\\">\\r\\n        <i class=\\\"fa fa-twitter\\\"></i>\\r\\n      </span>\\r\\n        </a>\\r\\n    </div>\\r\\n\\r\\n    <span class=\\\"nav-toggle\\\">\\r\\n    <span></span>\\r\\n    <span></span>\\r\\n    <span></span>\\r\\n    </span>\\r\\n\\r\\n    <div class=\\\"nav-right nav-menu\\\">\\r\\n        <a class=\\\"nav-item\\\" href=\\\"#\\\">\\r\\n      Setting\\r\\n    </a>\\r\\n    </div>\\r\\n</nav>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/navbar/navbar.html\n// module id = 50\n// module chunks = 1","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar Player_1 = require('./Player');\r\nvar MonitorModel_1 = require('../../../model/MonitorModel');\r\nvar JsFunc_1 = require('../../../utils/JsFunc');\r\nvar VueBase_1 = require('../../../utils/VueBase');\r\nexports.monitorModel = new MonitorModel_1.MonitorModel();\r\nvar MonitorView = (function (_super) {\r\n    __extends(MonitorView, _super);\r\n    function MonitorView() {\r\n        _super.call(this);\r\n        this.template = require('./monitor.html');\r\n        this.topicArr = VueBase_1.VueBase.PROP;\r\n        this.roomArr = VueBase_1.VueBase.PROP;\r\n        this.playerArr = VueBase_1.VueBase.PROP;\r\n        this.components = {\r\n            'Player': Player_1.playerView,\r\n        };\r\n        this.methods = {\r\n            onSelectTopic: function (topicId) {\r\n                var _this = this;\r\n                console.log(\"onSelectTopic:\", topicId);\r\n                exports.monitorModel.getLiveList(topicId, function (roomArr) {\r\n                    _this.roomArr = roomArr;\r\n                    for (var i = 0; i < _this.roomArr.length; i++) {\r\n                        var roomInfo = _this.roomArr[i];\r\n                        var urlLen = roomInfo.rtmp.length;\r\n                        roomInfo.shortUrl = roomInfo.rtmp.substr(0, 30)\r\n                            + \"...\" + roomInfo.rtmp.substr(urlLen - 11, 11);\r\n                    }\r\n                    console.log('roomArr', _this.roomArr);\r\n                    $('#roomList').show();\r\n                });\r\n            },\r\n            onOpenRoom: function (roomInfo) {\r\n                console.log(roomInfo);\r\n                this.playerArr.push(roomInfo);\r\n                $('#roomList').hide();\r\n            },\r\n        };\r\n        VueBase_1.VueBase.initProps(this);\r\n    }\r\n    MonitorView.prototype.created = function () {\r\n        console.log(\"created\");\r\n    };\r\n    MonitorView.prototype.mounted = function () {\r\n        this.playerArr = [];\r\n        console.log(\"mounted\");\r\n        this.getTopicInfo();\r\n    };\r\n    MonitorView.prototype.getTopicInfo = function () {\r\n        var _this = this;\r\n        exports.monitorModel.getTopic(function (topicInfoArr) {\r\n            var a = topicInfoArr.sort(JsFunc_1.descendingProp('liveCount'));\r\n            var actTopic = [];\r\n            var disActTopic = [];\r\n            for (var i = 0; i < a.length; i++) {\r\n                var topicObj = a[i];\r\n                if (topicObj.hasActiveLive) {\r\n                    actTopic.push(topicObj);\r\n                }\r\n                else\r\n                    disActTopic.push(topicObj);\r\n            }\r\n            if (exports.monitorModel.settingModel.isShowRecVideo)\r\n                _this.topicArr = actTopic.concat(disActTopic);\r\n            else\r\n                _this.topicArr = actTopic.concat();\r\n            console.log('topicInfo', _this.topicArr);\r\n        });\r\n    };\r\n    return MonitorView;\r\n}(VueBase_1.VueBase));\r\nexports.monitorView = new MonitorView();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/monitor/Monitor.ts\n// module id = 51\n// module chunks = 1","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar VueBase_1 = require('../../../utils/VueBase');\r\nvar PlayerView = (function (_super) {\r\n    __extends(PlayerView, _super);\r\n    function PlayerView() {\r\n        _super.call(this);\r\n        this.template = require('./player.html');\r\n        this.roomInfo = VueBase_1.VueBase.PROP;\r\n        this.idx = VueBase_1.VueBase.PROP;\r\n        VueBase_1.VueBase.initProps(this);\r\n    }\r\n    PlayerView.prototype.created = function () {\r\n        console.log(\"created player:\", this.idx, this.roomInfo);\r\n    };\r\n    PlayerView.prototype.mounted = function () {\r\n        var _this = this;\r\n        var playerId = 'player' + this.roomInfo.id;\r\n        console.log(\"mounted player\", playerId);\r\n        var $player = $(this.$el).find('video').attr('id', playerId);\r\n        var player = videojs(playerId, {\r\n            autoplay: true\r\n        }, function () {\r\n            console.log('Good to go!');\r\n            var url1 = _this.roomInfo.rtmp;\r\n            player.src({ src: url1, type: \"video/flv\" });\r\n            player.play();\r\n            player.on('ended', function () {\r\n                console.log('awww...over so soon?');\r\n            });\r\n        });\r\n    };\r\n    return PlayerView;\r\n}(VueBase_1.VueBase));\r\nexports.PlayerView = PlayerView;\r\nexports.playerView = new PlayerView();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/monitor/Player.ts\n// module id = 52\n// module chunks = 1","\"use strict\";\r\nvar VueBase = (function () {\r\n    function VueBase() {\r\n        this.props = {};\r\n        this.methods = {};\r\n    }\r\n    VueBase.initProps = function (subClassObj) {\r\n        for (var key in subClassObj) {\r\n            var o = subClassObj[key];\r\n            if (o.hasOwnProperty(\"_\")) {\r\n                if (o.hasOwnProperty(\"v\")) {\r\n                    subClassObj.props[key] = o.v;\r\n                }\r\n                else if (o.hasOwnProperty(\"f\")) {\r\n                    subClassObj.methods[key] = o.f;\r\n                }\r\n            }\r\n            else {\r\n                var isClsFunc = o instanceof Function;\r\n                if (isClsFunc) {\r\n                    subClassObj.methods[key] = o;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    VueBase.prototype.created = function () {\r\n    };\r\n    VueBase.prototype.mounted = function () {\r\n    };\r\n    VueBase.PROP = { v: null, _: null };\r\n    VueBase.Dict = { v: {}, _: null };\r\n    VueBase.Number = { v: 0, _: null };\r\n    VueBase.String = { v: \"\", _: null };\r\n    return VueBase;\r\n}());\r\nexports.VueBase = VueBase;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/utils/VueBase.ts\n// module id = 53\n// module chunks = 1","module.exports = \"<div class=\\\"PlayerVideoJS box\\\" style=\\\"width:260px;height:700px;padding:5;margin-right:5\\\">\\r\\n    <div class=\\\"row\\\">{{roomInfo.title}} <br>主播：{{roomInfo.mc}}\\r\\n    </div>\\r\\n    <video class=\\\"video-js vjs-default-skin\\\" controls width=\\\"250\\\" height=\\\"440\\\" data-setup=\\\"{}\\\">\\r\\n        </video>\\r\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/monitor/player.html\n// module id = 54\n// module chunks = 1","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar Command_1 = require('./Command');\r\nvar EventDispatcher_1 = require('../utils/EventDispatcher');\r\nvar AccountInfo_1 = require('./AccountInfo');\r\nvar TopicInfo_1 = require(\"./TopicInfo\");\r\nvar RoomInfo_1 = require(\"./RoomInfo\");\r\nvar DmkInfo_1 = require(\"./DmkInfo\");\r\nvar SettingModel = (function () {\r\n    function SettingModel() {\r\n        this.isShowRecVideo = false;\r\n    }\r\n    return SettingModel;\r\n}());\r\nvar _proxy = function (url) {\r\n    return \"/proxy?url=\" + url;\r\n};\r\nvar MonitorModel = (function (_super) {\r\n    __extends(MonitorModel, _super);\r\n    function MonitorModel() {\r\n        _super.call(this);\r\n        this.accountInfo = new AccountInfo_1.AccountInfo();\r\n        this.settingModel = new SettingModel();\r\n        this.playerMap = {};\r\n        this.wsMap = {};\r\n        this.dmkArrMap = {};\r\n        this.nameTokenMap = {};\r\n        this.liveMap = {};\r\n    }\r\n    MonitorModel.prototype.openChatWs = function (roomInfo, token, onMsgCallback) {\r\n        var _this = this;\r\n        var liveId = roomInfo.id;\r\n        var idx = MonitorModel.getWsIdx(liveId, token);\r\n        var wsMap = this.wsMap;\r\n        if (!wsMap[idx]) {\r\n        }\r\n        this.getLiveChatUrl(liveId, token, function (chatWsUrl) {\r\n            console.log('con ws ', chatWsUrl);\r\n            if (!wsMap[idx]) {\r\n                exports.monitorModel.dmkArrMap[idx] = \"\";\r\n                wsMap[idx] = new WebSocket(chatWsUrl);\r\n                wsMap[idx].binaryType = \"arraybuffer\";\r\n                wsMap[idx].onopen = function (evt) {\r\n                    console.log('websocket open');\r\n                };\r\n                wsMap[idx].funcArr = [onMsgCallback];\r\n                wsMap[idx].onmessage = function (evt) {\r\n                    var dmkMsg = DmkInfo_1.decodeMsg(evt.data);\r\n                    if (dmkMsg) {\r\n                        var dmkContent = dmkMsg.content;\r\n                        var dmkUser = dmkMsg.user.displayName;\r\n                        console.log(\"onWebSocketMsg\", evt, dmkContent);\r\n                        if (dmkContent) {\r\n                            exports.monitorModel.dmkArrMap[idx] += \"[\" + dmkUser + \"]:\" + dmkContent + \"\\n\";\r\n                            for (var i = 0; i < wsMap[idx].funcArr.length; i++) {\r\n                                var func = wsMap[idx].funcArr[i];\r\n                                func(exports.monitorModel.dmkArrMap[idx]);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                _this.emit(Command_1.CommandId.openWs);\r\n            }\r\n            else {\r\n                onMsgCallback(exports.monitorModel.dmkArrMap[idx]);\r\n                wsMap[idx].funcArr.push(onMsgCallback);\r\n            }\r\n        });\r\n    };\r\n    MonitorModel.prototype.getTopicLives = function (topicArr, callback) {\r\n        var for1 = function (idx, topicArr) {\r\n            if (idx < topicArr.length) {\r\n                exports.monitorModel.getLiveList(topicArr[idx].id, function (roomArr) {\r\n                    topicArr[idx].roomArr = roomArr;\r\n                    for (var k = 0; k < roomArr.length; k++) {\r\n                        var roomInfo = roomArr[k];\r\n                        var urlLen = roomInfo.rtmp.length;\r\n                        roomInfo.shortUrl = roomInfo.rtmp.substr(0, 30)\r\n                            + \"...\" + roomInfo.rtmp.substr(urlLen - 11, 11);\r\n                    }\r\n                    for1(idx + 1, topicArr);\r\n                });\r\n            }\r\n            else {\r\n                callback(topicArr);\r\n            }\r\n        };\r\n        for1(0, topicArr);\r\n    };\r\n    MonitorModel.prototype.getTopic = function (callback, cursor, topicArrPre) {\r\n        var _this = this;\r\n        var topicArr = [];\r\n        if (topicArrPre)\r\n            topicArr = topicArr.concat(topicArrPre);\r\n        var url1 = 'http://api.weilutv.com/1/topic/list';\r\n        console.log(\"getTopic\");\r\n        $.ajax({\r\n            url: _proxy(url1),\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify({ cursor: cursor }),\r\n            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n            success: function (body) {\r\n                onRes(body);\r\n            },\r\n            error: function (e) {\r\n                console.log(url1, e);\r\n            }\r\n        });\r\n        var onRes = function (body) {\r\n            var topics = body.result.topics;\r\n            var hasMore = body.result.cursor.hasMore;\r\n            var cursor = body.result.cursor;\r\n            if (body.success) {\r\n                for (var i = 0; i < topics.length; i++) {\r\n                    var obj = topics[i];\r\n                    var topicInfo = new TopicInfo_1.TopicInfo();\r\n                    topicInfo.id = obj.id;\r\n                    topicInfo.topic = obj.title;\r\n                    topicInfo.liveCount = obj.count.live;\r\n                    topicInfo.videoCount = obj.count.video;\r\n                    topicInfo.viewCount = obj.count.view;\r\n                    topicInfo.hasActiveLive = obj.hasActiveLive;\r\n                    topicArr.push(topicInfo);\r\n                }\r\n                if (hasMore) {\r\n                    _this.getTopic(callback, cursor, topicArr);\r\n                }\r\n                else {\r\n                    if (callback)\r\n                        callback(topicArr);\r\n                }\r\n            }\r\n            else\r\n                throw \"get /1/topic/list failed\";\r\n        };\r\n    };\r\n    ;\r\n    MonitorModel.prototype.getLiveChatUrl = function (liveId, token, callback) {\r\n        var url = \"https://api.weilutv.com/1/live/\" + liveId;\r\n        console.log(\"getLiveChatUrl\", url);\r\n        $.ajax({\r\n            url: url,\r\n            type: 'GET',\r\n            headers: { Authorization: \"Bearer \" + token },\r\n            success: function (body) {\r\n                console.log('get Live chat', body);\r\n                var chatUrl = body.result.chat;\r\n                callback(chatUrl);\r\n            },\r\n            error: function (e) {\r\n                console.log(url, e);\r\n            }\r\n        });\r\n    };\r\n    MonitorModel.prototype.getLiveList = function (topicId, callback, cursor, roomArrPre) {\r\n        var _this = this;\r\n        var roomArr = [];\r\n        if (roomArrPre)\r\n            roomArr = roomArr.concat(roomArrPre);\r\n        var roomInfo;\r\n        var liveUrl = \"https://api.weilutv.com/1/topic/\" + topicId + \"/live/live_list\";\r\n        console.log(liveUrl, cursor, roomArr.length);\r\n        $.ajax({\r\n            url: _proxy(liveUrl),\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify({ cursor: cursor }),\r\n            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n            success: function (body) {\r\n                onRes(body);\r\n            },\r\n            error: function (e) {\r\n                console.log(liveUrl, e);\r\n            }\r\n        });\r\n        var onRes = function (body) {\r\n            if (body.success) {\r\n                var lives = body.result.lives;\r\n                var hasMore = body.result.cursor.hasMore;\r\n                var cursor = body.result.cursor;\r\n                for (var j = 0; j < lives.length; j++) {\r\n                    var liveObj = lives[j];\r\n                    if (!_this.liveMap[liveObj.id])\r\n                        _this.liveMap[liveObj.id] = new RoomInfo_1.RoomInfo;\r\n                    roomInfo = _this.liveMap[liveObj.id];\r\n                    roomInfo.title = liveObj.title;\r\n                    roomInfo.mc = liveObj.user.displayName;\r\n                    roomInfo.rtmp = liveObj.playUrl;\r\n                    roomInfo.id = liveObj.id;\r\n                    roomInfo.topicId = topicId;\r\n                    roomArr.push(roomInfo);\r\n                }\r\n                console.log('get live:', liveObj);\r\n                if (hasMore) {\r\n                    _this.getLiveList(topicId, callback, cursor, roomArr);\r\n                }\r\n                else if (callback)\r\n                    callback(roomArr);\r\n            }\r\n            else\r\n                throw \"get /live_list failed\";\r\n        };\r\n    };\r\n    ;\r\n    MonitorModel.sendCommit = function (token, topicId, commit) {\r\n        var apiUrl = \"https://api.weilutv.com/comment/t\" + topicId + \"/post/\";\r\n    };\r\n    MonitorModel.getWsIdx = function (liveId, token) {\r\n        return liveId + \":\" + token;\r\n    };\r\n    return MonitorModel;\r\n}(EventDispatcher_1.EventDispatcher));\r\nexports.MonitorModel = MonitorModel;\r\nexports.monitorModel = new MonitorModel();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/MonitorModel.ts\n// module id = 55\n// module chunks = 1","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar EventDispatcher_1 = require(\"../utils/EventDispatcher\");\r\n(function (CommandId) {\r\n    CommandId[CommandId[\"ShowConsoleWin\"] = 100000] = \"ShowConsoleWin\";\r\n    CommandId[CommandId[\"openWs\"] = 100001] = \"openWs\";\r\n    CommandId[CommandId[\"beforeAcOpiontArr\"] = 100002] = \"beforeAcOpiontArr\";\r\n    CommandId[CommandId[\"afterAcOpiontArr\"] = 100003] = \"afterAcOpiontArr\";\r\n})(exports.CommandId || (exports.CommandId = {}));\r\nvar CommandId = exports.CommandId;\r\nvar CommandItem = (function () {\r\n    function CommandItem(id) {\r\n        this.id = id;\r\n    }\r\n    return CommandItem;\r\n}());\r\nvar Command = (function (_super) {\r\n    __extends(Command, _super);\r\n    function Command() {\r\n        _super.call(this);\r\n        console.log(\"CommandId\", CommandId);\r\n    }\r\n    return Command;\r\n}(EventDispatcher_1.EventDispatcher));\r\nexports.Command = Command;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/Command.ts\n// module id = 56\n// module chunks = 1","\"use strict\";\r\nvar EventDispatcher = (function () {\r\n    function EventDispatcher() {\r\n        this._func = {};\r\n        this._funcId = 0;\r\n    }\r\n    EventDispatcher.prototype.on = function (type, func) {\r\n        if (!this._func[type])\r\n            this._func[type] = [];\r\n        this._funcId++;\r\n        this._func[type].push({ func: func, id: this._funcId });\r\n    };\r\n    EventDispatcher.prototype.emit = function (type, param, broadcastId) {\r\n        if (param === void 0) { param = null; }\r\n        if (broadcastId === void 0) { broadcastId = null; }\r\n        if (this._func[type]) {\r\n            for (var i = 0; i < this._func[type].length; ++i) {\r\n                var f = this._func[type][i];\r\n                if (f)\r\n                    f.func(param);\r\n            }\r\n        }\r\n        if (this.broadcast && broadcastId)\r\n            this.broadcast(broadcastId, type, param);\r\n    };\r\n    EventDispatcher.prototype.proxy = function () {\r\n        var param = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            param[_i - 0] = arguments[_i];\r\n        }\r\n        throw new Error(\"no proxy method!!!\");\r\n    };\r\n    ;\r\n    EventDispatcher.prototype.broadcast = function () {\r\n        var param = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            param[_i - 0] = arguments[_i];\r\n        }\r\n        throw new Error(\"no broadcast method!!!\");\r\n    };\r\n    ;\r\n    EventDispatcher.prototype.del = function (type, funcId) {\r\n        if (funcId === void 0) { funcId = -1; }\r\n        if (this._func[type])\r\n            if (funcId < 0) {\r\n                this._func[type] = [];\r\n            }\r\n            else {\r\n                for (var i = 0; i < this._func[type].length; ++i) {\r\n                    var f = this._func[type][i];\r\n                    if (f) {\r\n                        if (f.id == funcId) {\r\n                            delete this._func[type][i];\r\n                            console.log('del event', type, funcId);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    };\r\n    EventDispatcher.prototype.removeAll = function () {\r\n        this._func = {};\r\n    };\r\n    return EventDispatcher;\r\n}());\r\nexports.EventDispatcher = EventDispatcher;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/utils/EventDispatcher.ts\n// module id = 57\n// module chunks = 1","\"use strict\";\r\nvar AccountInfo = (function () {\r\n    function AccountInfo() {\r\n        this.userArr = [\r\n            { name: \"20000000003\", pw: \"vl12450\", token: '', displayName: '' },\r\n            { name: \"20000000004\", pw: \"vl12450\", token: '', displayName: '' }\r\n        ];\r\n        this.initConf();\r\n    }\r\n    AccountInfo.prototype._getMyProfile = function (token, callback) {\r\n        var url = \"https://api.weilutv.com/1/my/profile\";\r\n        $.ajax({\r\n            url: url,\r\n            type: 'GET',\r\n            headers: { Authorization: \"Bearer \" + token },\r\n            success: function (body) {\r\n                console.log('get Live chat');\r\n                var displayName = body.result.displayName;\r\n                callback(displayName);\r\n            },\r\n            error: function (e) {\r\n                console.log(url, e);\r\n            }\r\n        });\r\n    };\r\n    AccountInfo.prototype._getPassword = function (ac) {\r\n        for (var _i = 0, _a = this.userArr; _i < _a.length; _i++) {\r\n            var user = _a[_i];\r\n            if (user.name == ac) {\r\n                return user.pw;\r\n            }\r\n        }\r\n        return \"\";\r\n    };\r\n    AccountInfo.prototype.getDisplayName = function (ac) {\r\n        for (var _i = 0, _a = this.userArr; _i < _a.length; _i++) {\r\n            var user = _a[_i];\r\n            if (user.name == ac) {\r\n                return user.displayName;\r\n            }\r\n        }\r\n        return \"\";\r\n    };\r\n    AccountInfo.prototype.login = function (ac, pw, callback) {\r\n        var _this = this;\r\n        var url = 'https://api.weilutv.com/1/account/login';\r\n        if (!pw) {\r\n            pw = this._getPassword(ac);\r\n        }\r\n        $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify({ username: ac, password: pw }),\r\n            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n            success: function (body) {\r\n                onRes(body);\r\n            },\r\n            error: function (e) { console.log(url, e); }\r\n        });\r\n        var onRes = function (body) {\r\n            console.log(\"login res:\", body);\r\n            if (body.success) {\r\n                var token_1 = body.result.token;\r\n                _this._getMyProfile(token_1, function (displayName) {\r\n                    _this._updateToken(ac, pw, token_1, displayName);\r\n                    callback(token_1);\r\n                });\r\n            }\r\n            else\r\n                throw \"login failed\";\r\n        };\r\n    };\r\n    AccountInfo.prototype.initConf = function () {\r\n    };\r\n    AccountInfo.prototype._updateToken = function (name, pw, token, displayName) {\r\n        var isExist = false;\r\n        for (var i = 0; i < this.userArr.length; i++) {\r\n            var acObj = this.userArr[i];\r\n            if (acObj.name == name) {\r\n                acObj.token = token;\r\n                acObj.displayName = displayName;\r\n                isExist = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!isExist) {\r\n            this.userArr.push({ name: name, pw: pw, token: token, displayName: displayName });\r\n        }\r\n    };\r\n    return AccountInfo;\r\n}());\r\nexports.AccountInfo = AccountInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/AccountInfo.ts\n// module id = 58\n// module chunks = 1","\"use strict\";\r\nvar TopicInfo = (function () {\r\n    function TopicInfo() {\r\n    }\r\n    return TopicInfo;\r\n}());\r\nexports.TopicInfo = TopicInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/TopicInfo.ts\n// module id = 59\n// module chunks = 1","\"use strict\";\r\nvar RoomInfo = (function () {\r\n    function RoomInfo() {\r\n    }\r\n    return RoomInfo;\r\n}());\r\nexports.RoomInfo = RoomInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/RoomInfo.ts\n// module id = 60\n// module chunks = 1","\"use strict\";\r\nvar Message;\r\nvar Danmaku;\r\nprotobuf.load(\"/pb/live_websocket.proto\", function (err, root) {\r\n    if (err)\r\n        throw err;\r\n    Message = root.lookup(\"Message\");\r\n    Danmaku = root.lookup(\"Danmaku\");\r\n});\r\nexports.packDmk = function (content, user) {\r\n    var dmkMsg = new Danmaku();\r\n    dmkMsg.content = content;\r\n    var msg = new Message();\r\n    msg.content = dmkMsg.encode().toArrayBuffer();\r\n    msg.type = 20;\r\n    msg.timestamp = new Date().getTime();\r\n    var byteBuffer = msg.encode();\r\n    return byteBuffer.toArrayBuffer();\r\n};\r\nexports.decodeMsg = function (msgBuf) {\r\n    var msg = Message.decode(msgBuf);\r\n    if (msg.type == 20) {\r\n        var dmk = Danmaku.decode(msg.content);\r\n        console.log(dmk);\r\n        return dmk;\r\n    }\r\n};\r\nvar Danmaku2 = (function () {\r\n    function Danmaku2() {\r\n    }\r\n    Danmaku2.prototype.pack = function () {\r\n    };\r\n    return Danmaku2;\r\n}());\r\nexports.Danmaku2 = Danmaku2;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/model/DmkInfo.ts\n// module id = 61\n// module chunks = 1","\"use strict\";\r\nfunction ascendingProp(prop) {\r\n    return function (a, b) {\r\n        return a[prop] - b[prop];\r\n    };\r\n}\r\nexports.ascendingProp = ascendingProp;\r\nfunction descendingProp(prop) {\r\n    return function (a, b) {\r\n        return b[prop] - a[prop];\r\n    };\r\n}\r\nexports.descendingProp = descendingProp;\r\nfunction mapToSortArray(map, prop, sortFunc) {\r\n    var arr = [];\r\n    for (var k in map) {\r\n        arr.push(map[k]);\r\n    }\r\n    arr.sort(sortFunc(prop));\r\n    return arr;\r\n}\r\nexports.mapToSortArray = mapToSortArray;\r\nfunction mapToArr(map) {\r\n    var a = [];\r\n    for (var k in map) {\r\n        a.push(map[k]);\r\n    }\r\n    return a;\r\n}\r\nexports.mapToArr = mapToArr;\r\nfunction arrCountSame(arrA, arrB) {\r\n    var n = 0;\r\n    for (var i = 0; i < arrB.length; i++) {\r\n        var obj = arrB[i];\r\n        if (arrA.indexOf(obj) > -1) {\r\n            n++;\r\n        }\r\n    }\r\n    return n;\r\n}\r\nexports.arrCountSame = arrCountSame;\r\nfunction arrUniqueFilter(el, i, a) {\r\n    return i == a.indexOf(el);\r\n}\r\nexports.arrUniqueFilter = arrUniqueFilter;\r\nfunction loadImg(path1, callback) {\r\n    var img = new Image();\r\n    img.onload = callback;\r\n    img.src = path1;\r\n}\r\nexports.loadImg = loadImg;\r\nfunction loadImgArr(pathArr, callback) {\r\n    var count = pathArr.length;\r\n    function onLoadImg() {\r\n        count--;\r\n        if (count === 0)\r\n            callback();\r\n    }\r\n    for (var i = 0; i < pathArr.length; i++) {\r\n        var p = pathArr[i];\r\n        var img = new Image();\r\n        img.onload = onLoadImg;\r\n        img.src = p;\r\n    }\r\n}\r\nexports.loadImgArr = loadImgArr;\r\nfunction combineArr(arr, num) {\r\n    var r = [];\r\n    (function f(t, a, n) {\r\n        if (n == 0) {\r\n            return r.push(t);\r\n        }\r\n        for (var i = 0, l = a.length; i <= l - n; i++) {\r\n            f(t.concat(a[i]), a.slice(i + 1), n - 1);\r\n        }\r\n    })([], arr, num);\r\n    return r;\r\n}\r\nexports.combineArr = combineArr;\r\nfunction formatSecond(sec, minStr, secStr) {\r\n    if (minStr === void 0) { minStr = \":\"; }\r\n    if (secStr === void 0) { secStr = \"\"; }\r\n    var min = Math.floor(sec / 60);\r\n    var s = sec % 60;\r\n    var strMin = min + \"\";\r\n    var strSec = s + \"\";\r\n    if (min < 10)\r\n        strMin = \"0\" + strMin;\r\n    if (s < 10)\r\n        strSec = \"0\" + strSec;\r\n    return strMin + minStr + strSec + secStr;\r\n}\r\nexports.formatSecond = formatSecond;\r\nfunction getLength(str) {\r\n    var realLength = 0, len = str.length, charCode = -1;\r\n    for (var i = 0; i < len; i++) {\r\n        charCode = str.charCodeAt(i);\r\n        if (charCode >= 0 && charCode <= 128)\r\n            realLength += 1;\r\n        else\r\n            realLength += 2;\r\n    }\r\n    return realLength;\r\n}\r\nexports.getLength = getLength;\r\nfunction cnWrap(str, len, start) {\r\n    if (start === void 0) { start = 0; }\r\n    var str_line_length = 0;\r\n    var str_len = str.length;\r\n    var str_cut = new String();\r\n    var str_out = '';\r\n    for (var i = start; i < str_len; i++) {\r\n        var a = str.charAt(i);\r\n        str_line_length++;\r\n        if (escape(a).length > 4) {\r\n            str_line_length++;\r\n        }\r\n        str_cut = str_cut.concat(a);\r\n        if (str_line_length >= len) {\r\n            str_out += str_cut.concat('\\n');\r\n            str_cut = new String();\r\n            str_line_length = 0;\r\n        }\r\n    }\r\n    str_out += str_cut;\r\n    return str_out;\r\n}\r\nexports.cnWrap = cnWrap;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/utils/JsFunc.ts\n// module id = 62\n// module chunks = 1","module.exports = \"<aside class=\\\"menu\\\">\\r\\n    <p class=\\\"menu-label\\\">\\r\\n        话题\\r\\n    </p>\\r\\n    <ul class=\\\"menu-list\\\">\\r\\n        <li v-for=\\\"(topic,index) in topicArr\\\">\\r\\n            <a href=\\\"#\\\" @click=\\\"onSelectTopic(topic.id)\\\">{{topic.topic}}</a>\\r\\n        </li>\\r\\n    </ul>\\r\\n\\r\\n    <div style=\\\"position: absolute;\\r\\n         display: inline-flex;\\r\\n         left: 270px;top:55px;\\\">\\r\\n        <vue v-for=\\\"(roomInfo, index) in playerArr\\\">\\r\\n            <player :idx=\\\"index\\\" :roomInfo='roomInfo'>\\r\\n            </player>\\r\\n        </vue>\\r\\n    </div>\\r\\n\\r\\n    <div style=\\\"overflow-y: scroll\\\">\\r\\n        <div id=\\\"roomList\\\" class=\\\"collection box\\\" style=\\\"position: absolute;left: 70px;top:60px;width: 800px;z-index: 999;display:none\\\">\\r\\n            <li v-for=\\\"(roomInfo,index) in roomArr\\\">\\r\\n                <div class=\\\"row\\\">{{roomInfo.title}} [{{roomInfo.mc}}]\\r\\n                    <a href=\\\"#\\\" @click=\\\"onOpenRoom(roomInfo)\\\" title=\\\"打开直播\\\">{{ roomInfo.shortUrl}}</a>\\r\\n                </div>\\r\\n            </li>\\r\\n        </div>\\r\\n    </div>\\r\\n</aside>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/view/walue/monitor/monitor.html\n// module id = 63\n// module chunks = 1"],"sourceRoot":""}